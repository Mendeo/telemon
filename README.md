# Telemon: простой мониторинг сервера на Node.js

## Назначение
Программа предназначена для мониторинга домашнего сервера.  
Отслеживаются различные критические события. При их возникновении происходит отправка сообщения.

На сегодняшний день основным способом отправки сообщения является отправка его в телеграм при помощи телеграм бота. Т.е. вы создаёте своего телеграм бота, указываете в файле **senders/telegram/credentials.json** его токен и chat id вашего телеграма. Программа будет слать сообщения в этот бот через Telegram API.

При этом программа не ограничена отправкой сообщений только в телеграм. В каталоге **senders** содержатся модули для отправки сообщений разными способами. На данный момент реализована отправка в телеграм и просто на TCP сервер.

Какие именно события отслеживаются определяется пользователем в файле **main.mjs**.
Для отслеживания событий применяются механизм слежения за заданным каталогом или файлом или переодическое выполнения заданной команды, с целью обнаружить важные изменения в её выводе. Указанные модули наблюдения за системой находятся в папке **watchers**. Программа не ограничена только такими механизмами слежения. Но на сегодняшний день реализованы только они.

## Работа с программой
На сегодняшний день в файле main.mjs заданы:
* Оповещение о новой системной почте.
* Оповещения о новых сессиях пользователей.
* Оповещение об изменении статуса райд массива.
* Оповещение о превышение температуры процессора заданного порога.
* Оповещение об изменении статуса жёстких дисков (превышение температура и проверка важных SMART параметров).
* Оповещение о повышенной нагурзки на ЦП.
* Оповещение о превышении траффика (последовательно отправляются оповещения о превышении 2ГиБ, 4ГиБ, 6ГиБ, 8ГиБ и более 10ГиБ)

Другие отслеживания пользователь может задать по аналогии.
В папке **doc** представлена автоматически сгененированная документация на используемые модули слежения command_watcher, file_watcher, а также на модули отправки сообщений в телеграм и TCP-сервер.


## Запуск
Для тестового запуска используйте команду:
```bash
node ./main.mjs
```

Для автоматического запуска подразумевается работа программы в качестве сервиса systemd. Пример юнита представлен в файле telemon.service